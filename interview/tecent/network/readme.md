# 浏览器端的网络

最早的http协议并不提供以下功能
浏览器与服务器间沟通的方式
浏览器是一个exe应用，开发各种功能，来满足现代web服务的需求
DOM 如何解析
本质就是二进制流
1. 腾讯级面试题
```
accept:text/html
accept-encoding:gzip,deflate,br
accept-Charset:ISO-8859-1,utf-8
accept-language:zh-CN,zh
```

http头部（1-4行逐行分析）
1. 客户端期待服务器返回的html类型的头部
2. 期待服务器可以采用解压缩，压缩发送效率更高
3. 文件的编码类型，怎样显示内容
4. 中文优先

- http是浏览器和服务器之间的通信语言，是应用层协议，是互联网的基石
- 即将完成使命的http/1，正在走向我们的http/2，面向未来的http/3，以及更安全的https

2. 状态码 304
服务器端资源未修改
浏览器有缓存的能力，所以为了提升浏览器端的性能，可以为服务器端分忧，就是资源被缓存后，且没改变就只返回各304

http协议从简单的基于请求响应应答模式，到开发状态码来优化

那么怎么样了解一个你之前请求过的文件和现在请求的是否有差异
1. 浏览器缓存了这个文件
2. 服务器上有这个文件
3. 浏览器用自己本地的文件，但浏览器一旦跟新了内容，就重新请求
怎么实现： 创建时间 和 修改时间  Lastmodified ETag 

一切静态资源都应该缓存，这是打开页面快速的主要原因
1. 加速打开页面，甚至像一个离线应用，单机运行
2. 服务器端能省带宽，省去大量IO操作  304 + ETag

HTTP 超文本传输协议
最开始就只传文本， 
## http0.9 1991 应答式简单模型
- HTTP基于TCP的，七成协议，三次握手
- tcp建立连接后，TCP完成了，就会发送一个请求行的信息 GET /index.html 
- 服务器收到信息后，读取对应的HTML文件，并将数据以ASCII字符流返回客户端
- 传输完成后，断开连接

## HTTP/1.0
1994年 浏览器大战， 网景-》IE-》chrome
就要求支持多种类型的文件下载 请求头和响应头被设计出来 图片

- 浏览器要知道返回的是什么数据类型，浏览器根据不同的数据类型做不同的针对性的处理
- 由于传送的文件越来越多，服务器要压缩，就有了gzip
- 万维网全球化 就有了 zh-cn的设置
- 不同的编码格式 
以上就构成了请求头
- 服务器越来越忙 服务器可能会发生无应答的情况，所以就出现状态码，来回应
- Cache 机制
- user Agent 用户代理  User-Agent值是用来帮助服务器识别用户使用的操作系统、浏览器、浏览器版本等等信息的，因此也常被用来检测爬虫。UA是用户的一种标识，带有浏览器设备等信息

## HTTP/1.1
1. 改进持久连接  通道复用下
HTTP/1.1 中增加了一个持久连接的方法，它的特点是在一个TCP连接上可以传输多个HTTP请求，
只要浏览器或者服务器没有明确断开连接，那么该TCP会一直保持，
同一个域名。默认允许同时建立6个TCP持久连接 
2. 缺点：不太成熟的HTTP管线化
需要等待前面的请求得到回应后才能，继续下一次请求，这就叫 队头阻塞
3. 对虚拟主机的支持
让一台服务器响应多个域名
Domain -》IP -> 服务器+端口 -》服务器端程序
HOST字段，区分不同Domain 在同一台机器中调用不同的应用
4. Cookie，安全机制

## HTTP 2.0
管线优化 即优化之前的对头阻塞
为什么 CSS sprite 雪碧图 不再重要了，就是因为请求的数量得到了提高
